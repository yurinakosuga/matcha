<div class="container mt-4">
  <h2 class="">抹茶日記検索</h2>
</div>
 <div class="mt-4 mb-4">
<%= form_with model: @diary, url: search_diaries_search_path do |f| %>
  
  <%= f.hidden_field :q, value: "search" %>
  <div class="field">
    <%= f.label :"店名" %>
    <%= f.select :shop_id, options_from_collection_for_select(Shop.all, :id, :name), prompt: ''%>
  </div>
  
  <div class="field">
    <%= f.label :"来店回数" %>
    <%= f.select :number_of_times,*[1..10], include_blank: true %>回
  </div>
  
  <div class="field">
    <%= f.label :"曜日" %>
    <%= f.radio_button :week, Diary.weeks.key(0) %>
    <%= f.label :week, Diary.weeks_i18n[:weekday] %>
    <%= f.radio_button :week, Diary.weeks.key(1) %>
    <%= f.label :week, Diary.weeks_i18n[:weekend_holiday] %>
  </div>
  
  <div class="field">
    <%= f.label :"時間帯" %>
    <%= f.radio_button :time, Diary.times.key(0) %>
    <%= f.label :time, Diary.times_i18n[:morning] %>
    <%= f.radio_button :time, Diary.times.key(1) %>
    <%= f.label :time, Diary.times_i18n[:pm_12] %>
    <%= f.radio_button :time, Diary.times.key(2) %>
    <%= f.label :time, Diary.times_i18n[:pm_14] %>
    <%= f.radio_button :time, Diary.times.key(3) %>
    <%= f.label :time, Diary.times_i18n[:pm_16] %>
    <%= f.radio_button :time, Diary.times.key(4) %>
    <%= f.label :time, Diary.times_i18n[:pm_18] %>
  </div>
  
  <div class="field">
    <%= f.label :"人数" %>
    <%= f.select :number_of_people, *[1..10], include_blank: true %>人
  </div>
  
  <div class="field">
    <%= f.label :"利用方法" %>
    <%= f.radio_button :how_to_use, Diary.how_to_uses.key(0) %>
    <%= f.label :how_to_use, Diary.how_to_uses_i18n[:for_here] %>
    <%= f.radio_button :how_to_use, Diary.how_to_uses.key(1) %>
    <%= f.label :how_to_use, Diary.how_to_uses_i18n[:to_go] %>
  </div>
  
  <div class="field">
    <%= f.label :"待ち時間" %>
    <%= f.radio_button :waiting_time, Diary.waiting_times.key(0) %>
    <%= f.label :waiting_time, Diary.waiting_times_i18n[:none_time] %>
    <%= f.radio_button :waiting_time, Diary.waiting_times.key(1) %>
    <%= f.label :waiting_time, Diary.waiting_times_i18n[:minutes_15] %>
    <%= f.radio_button :waiting_time, Diary.waiting_times.key(2) %>
    <%= f.label :waiting_time, Diary.waiting_times_i18n[:minutes_30] %>
    <%= f.radio_button :waiting_time, Diary.waiting_times.key(3) %>
    <%= f.label :waiting_time, Diary.waiting_times_i18n[:minutes_45] %>
    <%= f.radio_button :waiting_time, Diary.waiting_times.key(4) %>
    <%= f.label :waiting_time, Diary.waiting_times_i18n[:hour_1] %>
  </div>
  
  
  
  <div class="field">
    <%= f.label :"スイーツ" %>
    <%= f.select :genre_id, options_from_collection_for_select(Genre.all, :id, :name), prompt: ''%>
  </div>
  
  <div class="field">
    <%= f.label :"値段" %>
    <%= f.radio_button :price, Diary.prices.key(0) %>
    <%= f.label :price, Diary.prices_i18n[:yen_500] %>
    <%= f.radio_button :price, Diary.prices.key(1) %>
    <%= f.label :price, Diary.prices_i18n[:yen_1000] %>
    <%= f.radio_button :price, Diary.prices.key(2) %>
    <%= f.label :price, Diary.prices_i18n[:yen_1500] %>
    <%= f.radio_button :price, Diary.prices.key(3) %>
    <%= f.label :price, Diary.prices_i18n[:yen_2000] %>
  </div>
  
  <div class="field">
    <%= f.label :"量" %>
    <%= f.radio_button :amount, Diary.amounts.key(0) %>
    <%= f.label :amount, Diary.amounts_i18n[:small] %>
    <%= f.radio_button :amount, Diary.amounts.key(1) %>
    <%= f.label :amount, Diary.amounts_i18n[:medium] %>
    <%= f.radio_button :amount, Diary.amounts.key(2) %>
    <%= f.label :amount, Diary.amounts_i18n[:large] %>
  </div>  
  
  <div class="field">
    <%= f.label :"抹茶の濃さ" %>
    <div class="d-inline-block">
      <div class="post_form">
        <%= f.radio_button :darkness, 5 ,id: 'darkness_1'%>
        <label for="darkness_1">★</label>
    
        <%= f.radio_button :darkness, 4 ,id: 'darkness_2'%>
        <label for="darkness_2">★</label>
  
        <%= f.radio_button :darkness, 3 ,id: 'darkness_3'%>
        <label for="darkness_3">★</label>
  
        <%= f.radio_button :darkness, 2 ,id: 'darkness_4'%>
        <label for="darkness_4">★</label>
    
        <%= f.radio_button :darkness, 1 ,id: 'darkness_5'%>
        <label for="darkness_5">★</label>
      </div>
    </div>
    
  </div>
  
  <div class="field">
    <%= f.label :"抹茶の甘さ" %>
    <%= f.radio_button :sweetness, Diary.sweetnesses.key(0) %>
    <%= f.label :sweetness, Diary.sweetnesses_i18n[:not_sweet] %>
    <%= f.radio_button :sweetness, Diary.sweetnesses.key(1) %>
    <%= f.label :sweetness, Diary.sweetnesses_i18n[:just_right] %>
    <%= f.radio_button :sweetness, Diary.sweetnesses.key(2) %>
    <%= f.label :sweetness, Diary.sweetnesses_i18n[:sweet] %>
  </div>
  
  <div class="field">
    <%= f.label :"総合評価" %>
    <div class="d-inline-block">
      <div class="post_form">
        <%= f.radio_button :comprehensive_evaluation, 5 ,id: 'all_review_1'%>
        <label for="all_review_1">★</label>
    
        <%= f.radio_button :comprehensive_evaluation, 4 ,id: 'all_review_2'%>
        <label for="all_review_2">★</label>
  
        <%= f.radio_button :comprehensive_evaluation, 3 ,id: 'all_review_3'%>
        <label for="all_review_3">★</label>
  
        <%= f.radio_button :comprehensive_evaluation, 2 ,id: 'all_review_4'%>
        <label for="all_review_4">★</label>
    
        <%= f.radio_button :comprehensive_evaluation, 1 ,id: 'all_review_5'%>
        <label for="all_review_5">★</label>
      </div>
    </div>
  </div>
  
  
  <%= f.submit '検索する', class:"btn btn-outline-success" %>
  <%= link_to "クリア", search_diaries_search_path, class:"btn btn-outline-success" %>
<% end %> 
</div>

<% if params[:q].present? %>
  <p>検索結果</p>
  <% if @diaries == [] %>
    検索結果はありません
  <% end %>
 
  <% @diaries.each do |diary| %>
      
        <div class="card w-50 mx-auto mt-4 shadow-lg">
          <div class="card-body">
            <div class="row">
        
              <div class="col-4">
                <%= link_to diary_path(diary.id) do  %>
                    <%= image_tag diary.get_image, size: "5×5" %> 
                <% end %>
              </div>
              <div class="col-5">
                <%= diary.shop.name %></br>
                <%= diary.genre.name %></br>
                抹茶の濃さ
                <% diary.darkness.times do %>
                  <span>★</span>
                <% end %></br>
                総合評価
                <% diary.comprehensive_evaluation.times do %>
                  <span>★</span>
                <% end %>
                <%= link_to user_diaries_path(diary.user.id) do  %></br>
                    <%= diary.user.nickname %>
                <% end %>
              </div>
            
            </div>
          </div>
        </div>  
        
   <% end %>
   <div class="d-flex justify-content-center my-4">
     <%= paginate @diaries %>
   </div>
<% end %>
